<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>Scraping Urutan Prestasi Nilai Akademik PPDB Jawa Timur | Hendra Manudinata</title>
<meta name=keywords content>
<meta name=description content="Pakai Bahasa Indonesia dulu, ya :)
Pembukaan Pada saat postingan ini ditulis, PPDB Jawa Timur jalur &ldquo;Prestasi Nilai Akademik&rdquo; SMA masih berlangsung, dan saya adalah salah satu pendaftarnya. Pendaftarannya itu sendiri berlangsung hingga Minggu, 26 Juni 2022.
Tentu saja, setelah mendaftar, saya kerap memeriksa peringkat saya dengan pendaftar lain di jalur yang sama dan sekolah yang sama juga. Di situs nya tertulis bahwa data di-update setiap 30 menit. Berarti saya harus memeriksanya setiap 30 menit pula.">
<meta name=author content>
<link rel=canonical href=https://www.hendra-manudinata.my.id/blog/scrap-ppdb-jatim-akademik/>
<link crossorigin=anonymous href=/assets/css/stylesheet.d7fb4cbf980fe688a21621b06a795933c4e6bb2d4070ec940667af1715d84af2.css integrity="sha256-1/tMv5gP5oiiFiGwanlZM8Tmuy1AcOyUBmevFxXYSvI=" rel="preload stylesheet" as=style>
<script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://www.hendra-manudinata.my.id/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=https://www.hendra-manudinata.my.id/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=https://www.hendra-manudinata.my.id/favicon-32x32.png>
<link rel=apple-touch-icon href=https://www.hendra-manudinata.my.id/apple-touch-icon.png>
<link rel=mask-icon href=https://www.hendra-manudinata.my.id/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript><meta property="og:title" content="Scraping Urutan Prestasi Nilai Akademik PPDB Jawa Timur">
<meta property="og:description" content="Pakai Bahasa Indonesia dulu, ya :)
Pembukaan Pada saat postingan ini ditulis, PPDB Jawa Timur jalur &ldquo;Prestasi Nilai Akademik&rdquo; SMA masih berlangsung, dan saya adalah salah satu pendaftarnya. Pendaftarannya itu sendiri berlangsung hingga Minggu, 26 Juni 2022.
Tentu saja, setelah mendaftar, saya kerap memeriksa peringkat saya dengan pendaftar lain di jalur yang sama dan sekolah yang sama juga. Di situs nya tertulis bahwa data di-update setiap 30 menit. Berarti saya harus memeriksanya setiap 30 menit pula.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://www.hendra-manudinata.my.id/blog/scrap-ppdb-jatim-akademik/"><meta property="article:section" content="blog">
<meta property="article:published_time" content="2022-06-25T19:09:46+07:00">
<meta property="article:modified_time" content="2022-06-25T19:09:46+07:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Scraping Urutan Prestasi Nilai Akademik PPDB Jawa Timur">
<meta name=twitter:description content="Pakai Bahasa Indonesia dulu, ya :)
Pembukaan Pada saat postingan ini ditulis, PPDB Jawa Timur jalur &ldquo;Prestasi Nilai Akademik&rdquo; SMA masih berlangsung, dan saya adalah salah satu pendaftarnya. Pendaftarannya itu sendiri berlangsung hingga Minggu, 26 Juni 2022.
Tentu saja, setelah mendaftar, saya kerap memeriksa peringkat saya dengan pendaftar lain di jalur yang sama dan sekolah yang sama juga. Di situs nya tertulis bahwa data di-update setiap 30 menit. Berarti saya harus memeriksanya setiap 30 menit pula.">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Blogs","item":"https://www.hendra-manudinata.my.id/blog/"},{"@type":"ListItem","position":3,"name":"Scraping Urutan Prestasi Nilai Akademik PPDB Jawa Timur","item":"https://www.hendra-manudinata.my.id/blog/scrap-ppdb-jatim-akademik/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Scraping Urutan Prestasi Nilai Akademik PPDB Jawa Timur","name":"Scraping Urutan Prestasi Nilai Akademik PPDB Jawa Timur","description":"Pakai Bahasa Indonesia dulu, ya :)\nPembukaan Pada saat postingan ini ditulis, PPDB Jawa Timur jalur \u0026ldquo;Prestasi Nilai Akademik\u0026rdquo; SMA masih berlangsung, dan saya adalah salah satu pendaftarnya. Pendaftarannya itu sendiri berlangsung hingga Minggu, 26 Juni 2022.\nTentu saja, setelah mendaftar, saya kerap memeriksa peringkat saya dengan pendaftar lain di jalur yang sama dan sekolah yang sama juga. Di situs nya tertulis bahwa data di-update setiap 30 menit. Berarti saya harus memeriksanya setiap 30 menit pula.","keywords":[],"articleBody":"Pakai Bahasa Indonesia dulu, ya :)\nPembukaan Pada saat postingan ini ditulis, PPDB Jawa Timur jalur “Prestasi Nilai Akademik” SMA masih berlangsung, dan saya adalah salah satu pendaftarnya. Pendaftarannya itu sendiri berlangsung hingga Minggu, 26 Juni 2022.\nTentu saja, setelah mendaftar, saya kerap memeriksa peringkat saya dengan pendaftar lain di jalur yang sama dan sekolah yang sama juga. Di situs nya tertulis bahwa data di-update setiap 30 menit. Berarti saya harus memeriksanya setiap 30 menit pula. Sangat tidak efisien.\nUntuk mengisi kegabutan, saya berinisiatif untuk membuat sebuah script sederhana untuk scrapping situs PPDB Jawa Timur, khususnya pada halaman “Hasil Pemeringkatan Jalur Prestasi Nilai Akademik (SMA)”. Sepertinya seru, tuh. Dan Alhamdulillah berhasil!\nApa Yang Ingin Dicapai? Saya ingin membuat sebuah script sederhana yang akan:\n Scrap situs PPDB Jawa Timur, pendaftaran jalur “Prestasi Nilai Akademik” SMA Mengambil data yang diinginkan, yaitu  Nomor urutan saya Nama dan nilai urutan pertama Nama dan nilai urutan terakhir Waktu scraping dilakukan   Mengirimkan hasil data ke bot Telegram, setiap 30 menit menggunakan cron  Briefcase Dari Alat dan Bahan Saya menggunakan Python, bahasa pemrograman populer yang simple dan mudah dimengerti sebagai bahasa pemrograman dari script yang saya buat. Untuk request situs, saya menggunakan modul requests dan BeautifulSoup untuk parsing konten HTML. Last but not least, python-telegram-bot sebagai wrapper API untuk Bot Telegram\nMulai! Persiapan Import modul yang diperlukan:\nimport requests # Request HTML from bs4 import BeautifulSoup # Parsing HTML import telegram # Alias untuk `python-telegram-bot`, wrapper API Bot Telegram from datetime import datetime # Ambil informasi tanggal dan waktu , dan atur variabel:\nURL = \"https://XX.ppdbjatim.net/pengumuman/pemeringkatan/sma_rapor/sekolah/XXX\" # URL dari halaman pendaftaran TG_TOKEN = \"XXXXXXX\" # Token Bot Telegram TG_CHATID = \"XXXXX\" # Chat ID pengguna RESULT_FILENAME = \"Urutan Prestasi Nilai Akademik.txt\" # Hasil file TXT Request Ke Situs Pertama-tama, tentu saja, buat request menuju ke situs PPDB:\na = requests.get(URL) Analisa dan Merancang Scraper Saya mulai dengan menganalisa isi HTML dari halaman PPDB, spesifik untuk sekolah yang saya pilih. Isi yang saya cari yaitu konten tabel pemeringkatan, kira-kira seperti ini:\n... ... tr td-td tdNISN SISWAtd td bNAMA SISWAb td tdNILAI RATA-RATAtd tr tr td-td tdNISN SISWAtd td bNAMA SISWAb td tdNILAI RATA-RATAtd tr ... ... Elemen tr tersebut berada di elemen induk table, dengan id tbl-rangking. Jadi, kode untuk parsing kode HTML tersebut menggunakan BeautifulSoup adalah seperti berikut:\nb = BeautifulSoup(a.content, \"html.parser\") # Parse HTML c = b.find(\"table\", {\"id\": \"tbl-rangking\"}) # Cari elemen `table` yang dimaksud d = c.find_all(\"tr\")[1:] # Ambil semua elemen `tr`, terkecuali elemen pertama karena berisi header tabel Simpan Data Di Dictionary Sebelum memproses data akhir, saya menyimpan data overall pada sebuah dictionary, sebagai jaga-jaga jika dibutuhkan.\ndata = [] # Buat dictionary for element in d: # `for loop` terhadap elemen `tr` elementt = element.find_all(\"td\") # Ambil semua elemen `td` pada elemen `tr` saat ini data.append({ \"NISN\": elementt[1].text.strip(), # Tulis NISN \"NAMA\": elementt[2].text.strip(), # Tulis nama pendaftar \"NILAI\": elementt[3].text.strip() # Tulis nilai pendaftar }) Nah, data sudah berada di dictionary. Sip!\nTulis Hasil Akhir Saatnya untuk menulis data akhir di file text:\ntgText = \"\" # Buat variabel untuk menampung data akhir urutanHendra = \"\" # Urutan saya, akan diperlukan nanti namaPertama = data[0][\"NAMA\"] # Nama urutan pertama, akan diperlukan nanti nilaiPertama = data[0][\"NILAI\"] # Nilai urutan pertama, akan diperlukan nanti namaTerakhir = data[len(data) - 1][\"NAMA\"] # Nama urutan terakhir, akan diperlukan nanti nilaiTerakhir = data[len(data) - 1][\"NILAI\"] # Nilai urutan terakhir, akan diperlukan nanti for index, key in enumerate(data): # `for loop` terhadap isi dari dictionary index += 1 # Tambah `index`, karena selalu berawal dari 0 tgText += f'URUTAN KE-{index}: {key[\"NAMA\"]}({key[\"NILAI\"]}| {key[\"NISN\"]})\\n' # Tulis barisan if key[\"NAMA\"] == \"HENDRA MANUDINATA\": # Jika nama pendaftar saat ini adalah saya, urutanHendra = index # maka atur variable `urutanHendra` dengan index saat ini with open(RESULT_FILENAME, 'w') as file: # Buka, file.write(tgText) # dan isi file `RESULT_FILENAME` (\"Urutan Prestasi Nilai Akademik.txt\") Sampai sini, script akan melakukan scraping situs, mengambil data yang diinginkan, dan menuliskannya ke file text (“Urutan Prestasi Nilai Akademik.txt”).\nPengiriman Data Melalui Bot Telegram Mari lanjut ke proses pengiriman data melalui Bot Telegram, menggunakan python-telegram-bot:\n# Atur pesan Telegram TG_TEXT = \"\" TG_TEXT += f\"Urutan Prestasi Nilai Akademik\\n\\n\" TG_TEXT += f\"Urutan Anda: {urutanHendra}\\n\\n\" TG_TEXT += f\"Urutan pertama: {namaPertama}| {nilaiPertama}\\n\" TG_TEXT += f\"Urutan terakhir: {namaTerakhir}| {nilaiTerakhir}\\n\\n\" TG_TEXT += f\"Waktu scraping: {datetime.now().strftime('%H:%M')}\" # Kirim file text, dengan pesan Telegram sebelumnya sebagai caption bot.send_document(chat_id=TG_CHATID, document=open(RESULT_FILENAME, \"rb\"), caption=TG_TEXT, parse_mode=\"HTML\") Full Code Berikut adalah full code dari script yang tersedia di Gist saya:\n Penutup Demikianlah pengalaman lainnya yang dapat saya share. Semoga dapat menjadi referensi Anda, terlebih untuk peserta PPDB di Jawa Timur.\nTerima kasih sudah membaca!\n","wordCount":"760","inLanguage":"en","datePublished":"2022-06-25T19:09:46+07:00","dateModified":"2022-06-25T19:09:46+07:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.hendra-manudinata.my.id/blog/scrap-ppdb-jatim-akademik/"},"publisher":{"@type":"Organization","name":"Hendra Manudinata","logo":{"@type":"ImageObject","url":"https://www.hendra-manudinata.my.id/favicon.ico"}}}</script>
</head>
<body id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://www.hendra-manudinata.my.id accesskey=h title="Hendra Manudinata (Alt + H)">Hendra Manudinata</a>
<div class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</div>
</div>
<ul id=menu>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<h1 class=post-title>
Scraping Urutan Prestasi Nilai Akademik PPDB Jawa Timur
</h1>
<div class=post-meta><span title="2022-06-25 19:09:46 +0700 +0700">June 25, 2022</span>&nbsp;|&nbsp;<a href=https://github.com/hendramanudinata03/www.hendra-manudinata.my.id/blob/master/content/blog/scrap-ppdb-jatim-akademik.md rel="noopener noreferrer" target=_blank>Suggest Changes</a>
</div>
</header> <div class=toc>
<details>
<summary accesskey=c title="(Alt + C)">
<span class=details>Table of Contents</span>
</summary>
<div class=inner><ul>
<li>
<a href=#pembukaan aria-label=Pembukaan>Pembukaan</a></li>
<li>
<a href=#apa-yang-ingin-dicapai aria-label="Apa Yang Ingin Dicapai?">Apa Yang Ingin Dicapai?</a></li>
<li>
<a href=#_briefcase_-dari-alat-dan-bahan aria-label="Briefcase Dari Alat dan Bahan"><em>Briefcase</em> Dari Alat dan Bahan</a></li>
<li>
<a href=#mulai aria-label=Mulai!>Mulai!</a><ul>
<li>
<a href=#persiapan aria-label=Persiapan>Persiapan</a></li>
<li>
<a href=#request-ke-situs aria-label="Request Ke Situs">Request Ke Situs</a></li>
<li>
<a href=#analisa-dan-merancang-_scraper_ aria-label="Analisa dan Merancang Scraper">Analisa dan Merancang <em>Scraper</em></a></li>
<li>
<a href=#simpan-data-di-dictionary aria-label="Simpan Data Di Dictionary">Simpan Data Di Dictionary</a></li>
<li>
<a href=#tulis-hasil-akhir aria-label="Tulis Hasil Akhir">Tulis Hasil Akhir</a></li>
<li>
<a href=#pengiriman-data-melalui-bot-telegram aria-label="Pengiriman Data Melalui Bot Telegram">Pengiriman Data Melalui Bot Telegram</a></li>
<li>
<a href=#_full-code_ aria-label="Full Code"><em>Full Code</em></a></li></ul>
</li>
<li>
<a href=#penutup aria-label=Penutup>Penutup</a>
</li>
</ul>
</div>
</details>
</div>
<div class=post-content><p>Pakai Bahasa Indonesia dulu, ya :)</p>
<h1 id=pembukaan>Pembukaan<a hidden class=anchor aria-hidden=true href=#pembukaan>#</a></h1>
<p>Pada saat postingan ini ditulis, <a href=https://ppdbjatim.net>PPDB Jawa Timur</a> jalur &ldquo;Prestasi Nilai Akademik&rdquo; SMA masih berlangsung, dan saya adalah salah satu pendaftarnya. Pendaftarannya itu sendiri berlangsung hingga Minggu, 26 Juni 2022.</p>
<p>Tentu saja, setelah mendaftar, saya kerap memeriksa peringkat saya dengan pendaftar lain di jalur yang sama dan sekolah yang sama juga. Di situs nya tertulis bahwa <em>data</em> di-<em>update</em> setiap 30 menit. Berarti saya harus memeriksanya setiap 30 menit pula. Sangat tidak efisien.</p>
<p>Untuk mengisi <em>kegabutan</em>, saya berinisiatif untuk membuat sebuah <em>script</em> sederhana untuk <em>scrapping</em> situs PPDB Jawa Timur, khususnya pada halaman &ldquo;Hasil Pemeringkatan Jalur Prestasi Nilai Akademik (SMA)&rdquo;. <em>Sepertinya seru, tuh.</em> Dan <em>Alhamdulillah</em> berhasil!</p>
<h1 id=apa-yang-ingin-dicapai>Apa Yang Ingin Dicapai?<a hidden class=anchor aria-hidden=true href=#apa-yang-ingin-dicapai>#</a></h1>
<p>Saya ingin membuat sebuah <em>script</em> sederhana yang akan:</p>
<ul>
<li><em>Scrap</em> situs PPDB Jawa Timur, pendaftaran jalur &ldquo;Prestasi Nilai Akademik&rdquo; SMA</li>
<li>Mengambil data yang diinginkan, yaitu
<ol>
<li>Nomor urutan saya</li>
<li>Nama dan nilai urutan pertama</li>
<li>Nama dan nilai urutan terakhir</li>
<li>Waktu <em>scraping</em> dilakukan</li>
</ol>
</li>
<li>Mengirimkan hasil data ke bot Telegram, setiap 30 menit menggunakan <em>cron</em></li>
</ul>
<h1 id=_briefcase_-dari-alat-dan-bahan><em>Briefcase</em> Dari Alat dan Bahan<a hidden class=anchor aria-hidden=true href=#_briefcase_-dari-alat-dan-bahan>#</a></h1>
<p>Saya menggunakan Python, bahasa pemrograman populer yang <em>simple</em> dan mudah dimengerti sebagai bahasa pemrograman dari <em>script</em> yang saya buat. Untuk <em>request</em> situs, saya menggunakan modul <code>requests</code> dan <code>BeautifulSoup</code> untuk <em>parsing</em> konten HTML. <em>Last but not least</em>, <code>python-telegram-bot</code> sebagai wrapper API untuk Bot Telegram</p>
<h1 id=mulai>Mulai!<a hidden class=anchor aria-hidden=true href=#mulai>#</a></h1>
<h2 id=persiapan>Persiapan<a hidden class=anchor aria-hidden=true href=#persiapan>#</a></h2>
<p><em>Import</em> modul yang diperlukan:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#f92672>import</span> requests <span style=color:#75715e># Request HTML</span>
<span style=color:#f92672>from</span> bs4 <span style=color:#f92672>import</span> BeautifulSoup <span style=color:#75715e># Parsing HTML</span>
<span style=color:#f92672>import</span> telegram <span style=color:#75715e># Alias untuk `python-telegram-bot`, wrapper API Bot Telegram</span>
<span style=color:#f92672>from</span> datetime <span style=color:#f92672>import</span> datetime <span style=color:#75715e># Ambil informasi tanggal dan waktu</span>
</code></pre></div><p>, dan atur variabel:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>URL <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;https://XX.ppdbjatim.net/pengumuman/pemeringkatan/sma_rapor/sekolah/XXX&#34;</span> <span style=color:#75715e># URL dari halaman pendaftaran</span>
TG_TOKEN <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;XXXXXXX&#34;</span> <span style=color:#75715e># Token Bot Telegram</span>
TG_CHATID <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;XXXXX&#34;</span> <span style=color:#75715e># Chat ID pengguna</span>
RESULT_FILENAME <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Urutan Prestasi Nilai Akademik.txt&#34;</span> <span style=color:#75715e># Hasil file TXT</span>
</code></pre></div><h2 id=request-ke-situs>Request Ke Situs<a hidden class=anchor aria-hidden=true href=#request-ke-situs>#</a></h2>
<p>Pertama-tama, tentu saja, buat <em>request</em> menuju ke situs PPDB:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>a <span style=color:#f92672>=</span> requests<span style=color:#f92672>.</span>get(URL)
</code></pre></div><h2 id=analisa-dan-merancang-_scraper_>Analisa dan Merancang <em>Scraper</em><a hidden class=anchor aria-hidden=true href=#analisa-dan-merancang-_scraper_>#</a></h2>
<p>Saya mulai dengan menganalisa isi HTML dari halaman PPDB, spesifik untuk sekolah yang saya pilih. Isi yang saya cari yaitu konten tabel pemeringkatan, kira-kira seperti ini:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html>...
...

&lt;<span style=color:#f92672>tr</span>&gt;
&lt;<span style=color:#f92672>td</span>&gt;-&lt;/<span style=color:#f92672>td</span>&gt;
&lt;<span style=color:#f92672>td</span>&gt;&lt;<span style=color:#f92672>NISN</span> <span style=color:#a6e22e>SISWA</span>&gt;&lt;/<span style=color:#f92672>td</span>&gt;
&lt;<span style=color:#f92672>td</span>&gt;
&lt;<span style=color:#f92672>b</span>&gt;&lt;<span style=color:#f92672>NAMA</span> <span style=color:#a6e22e>SISWA</span>&gt;&lt;/<span style=color:#f92672>b</span>&gt;
&lt;/<span style=color:#f92672>td</span>&gt;
&lt;<span style=color:#f92672>td</span>&gt;&lt;<span style=color:#f92672>NILAI</span> <span style=color:#a6e22e>RATA-RATA</span>&gt;&lt;/<span style=color:#f92672>td</span>&gt;
&lt;/<span style=color:#f92672>tr</span>&gt;

&lt;<span style=color:#f92672>tr</span>&gt;
&lt;<span style=color:#f92672>td</span>&gt;-&lt;/<span style=color:#f92672>td</span>&gt;
&lt;<span style=color:#f92672>td</span>&gt;&lt;<span style=color:#f92672>NISN</span> <span style=color:#a6e22e>SISWA</span>&gt;&lt;/<span style=color:#f92672>td</span>&gt;
&lt;<span style=color:#f92672>td</span>&gt;
&lt;<span style=color:#f92672>b</span>&gt;&lt;<span style=color:#f92672>NAMA</span> <span style=color:#a6e22e>SISWA</span>&gt;&lt;/<span style=color:#f92672>b</span>&gt;
&lt;/<span style=color:#f92672>td</span>&gt;
&lt;<span style=color:#f92672>td</span>&gt;&lt;<span style=color:#f92672>NILAI</span> <span style=color:#a6e22e>RATA-RATA</span>&gt;&lt;/<span style=color:#f92672>td</span>&gt;
&lt;/<span style=color:#f92672>tr</span>&gt;

...
...
</code></pre></div><p>Elemen <code>tr</code> tersebut berada di elemen induk <code>table</code>, dengan <code>id</code> <code>tbl-rangking</code>. Jadi, kode untuk <em>parsing</em> kode HTML tersebut menggunakan <code>BeautifulSoup</code> adalah seperti berikut:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>b <span style=color:#f92672>=</span> BeautifulSoup(a<span style=color:#f92672>.</span>content, <span style=color:#e6db74>&#34;html.parser&#34;</span>) <span style=color:#75715e># Parse HTML</span>
c <span style=color:#f92672>=</span> b<span style=color:#f92672>.</span>find(<span style=color:#e6db74>&#34;table&#34;</span>, {<span style=color:#e6db74>&#34;id&#34;</span>: <span style=color:#e6db74>&#34;tbl-rangking&#34;</span>}) <span style=color:#75715e># Cari elemen `table` yang dimaksud</span>
d <span style=color:#f92672>=</span> c<span style=color:#f92672>.</span>find_all(<span style=color:#e6db74>&#34;tr&#34;</span>)[<span style=color:#ae81ff>1</span>:] <span style=color:#75715e># Ambil semua elemen `tr`, terkecuali elemen pertama karena berisi header tabel</span>
</code></pre></div><h2 id=simpan-data-di-dictionary>Simpan Data Di Dictionary<a hidden class=anchor aria-hidden=true href=#simpan-data-di-dictionary>#</a></h2>
<p>Sebelum memproses data akhir, saya menyimpan data <em>overall</em> pada sebuah <em>dictionary</em>, sebagai jaga-jaga jika dibutuhkan.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>data <span style=color:#f92672>=</span> [] <span style=color:#75715e># Buat dictionary</span>

<span style=color:#66d9ef>for</span> element <span style=color:#f92672>in</span> d: <span style=color:#75715e># `for loop` terhadap elemen `tr`</span>
    elementt <span style=color:#f92672>=</span> element<span style=color:#f92672>.</span>find_all(<span style=color:#e6db74>&#34;td&#34;</span>) <span style=color:#75715e># Ambil semua elemen `td` pada elemen `tr` saat ini</span>
    data<span style=color:#f92672>.</span>append({
        <span style=color:#e6db74>&#34;NISN&#34;</span>: elementt[<span style=color:#ae81ff>1</span>]<span style=color:#f92672>.</span>text<span style=color:#f92672>.</span>strip(), <span style=color:#75715e># Tulis NISN</span>
        <span style=color:#e6db74>&#34;NAMA&#34;</span>: elementt[<span style=color:#ae81ff>2</span>]<span style=color:#f92672>.</span>text<span style=color:#f92672>.</span>strip(), <span style=color:#75715e># Tulis nama pendaftar</span>
        <span style=color:#e6db74>&#34;NILAI&#34;</span>: elementt[<span style=color:#ae81ff>3</span>]<span style=color:#f92672>.</span>text<span style=color:#f92672>.</span>strip() <span style=color:#75715e># Tulis nilai pendaftar</span>
    })
</code></pre></div><p>Nah, data sudah berada di dictionary. Sip!</p>
<h2 id=tulis-hasil-akhir>Tulis Hasil Akhir<a hidden class=anchor aria-hidden=true href=#tulis-hasil-akhir>#</a></h2>
<p>Saatnya untuk menulis data akhir di <em>file</em> <em>text</em>:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>tgText <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;&#34;</span> <span style=color:#75715e># Buat variabel untuk menampung data akhir</span>
urutanHendra <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;&#34;</span> <span style=color:#75715e># Urutan saya, akan diperlukan nanti</span>
namaPertama <span style=color:#f92672>=</span> data[<span style=color:#ae81ff>0</span>][<span style=color:#e6db74>&#34;NAMA&#34;</span>] <span style=color:#75715e># Nama urutan pertama, akan diperlukan nanti</span>
nilaiPertama <span style=color:#f92672>=</span> data[<span style=color:#ae81ff>0</span>][<span style=color:#e6db74>&#34;NILAI&#34;</span>] <span style=color:#75715e># Nilai urutan pertama, akan diperlukan nanti</span>
namaTerakhir <span style=color:#f92672>=</span> data[len(data) <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>][<span style=color:#e6db74>&#34;NAMA&#34;</span>] <span style=color:#75715e># Nama urutan terakhir, akan diperlukan nanti</span>
nilaiTerakhir <span style=color:#f92672>=</span> data[len(data) <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>][<span style=color:#e6db74>&#34;NILAI&#34;</span>] <span style=color:#75715e># Nilai urutan terakhir, akan diperlukan nanti</span>

<span style=color:#66d9ef>for</span> index, key <span style=color:#f92672>in</span> enumerate(data): <span style=color:#75715e># `for loop` terhadap isi dari dictionary</span>
    index <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span> <span style=color:#75715e># Tambah `index`, karena selalu berawal dari 0</span>
    tgText <span style=color:#f92672>+=</span> <span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;URUTAN KE-</span><span style=color:#e6db74>{</span>index<span style=color:#e6db74>}</span><span style=color:#e6db74>: </span><span style=color:#e6db74>{</span>key[<span style=color:#e6db74>&#34;NAMA&#34;</span>]<span style=color:#e6db74>}</span><span style=color:#e6db74> (</span><span style=color:#e6db74>{</span>key[<span style=color:#e6db74>&#34;NILAI&#34;</span>]<span style=color:#e6db74>}</span><span style=color:#e6db74> | </span><span style=color:#e6db74>{</span>key[<span style=color:#e6db74>&#34;NISN&#34;</span>]<span style=color:#e6db74>}</span><span style=color:#e6db74>)</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#39;</span> <span style=color:#75715e># Tulis barisan</span>

    <span style=color:#66d9ef>if</span> key[<span style=color:#e6db74>&#34;NAMA&#34;</span>] <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;HENDRA MANUDINATA&#34;</span>: <span style=color:#75715e># Jika nama pendaftar saat ini adalah saya,</span>
        urutanHendra <span style=color:#f92672>=</span> index <span style=color:#75715e># maka atur variable `urutanHendra` dengan index saat ini</span>

<span style=color:#66d9ef>with</span> open(RESULT_FILENAME, <span style=color:#e6db74>&#39;w&#39;</span>) <span style=color:#66d9ef>as</span> file: <span style=color:#75715e># Buka,</span>
    file<span style=color:#f92672>.</span>write(tgText) <span style=color:#75715e># dan isi file `RESULT_FILENAME` (&#34;Urutan Prestasi Nilai Akademik.txt&#34;)</span>
</code></pre></div><p>Sampai sini, <em>script</em> akan melakukan <em>scraping</em> situs, mengambil data yang diinginkan, dan menuliskannya ke <em>file</em> <em>text</em> (&ldquo;Urutan Prestasi Nilai Akademik.txt&rdquo;).</p>
<h2 id=pengiriman-data-melalui-bot-telegram>Pengiriman Data Melalui Bot Telegram<a hidden class=anchor aria-hidden=true href=#pengiriman-data-melalui-bot-telegram>#</a></h2>
<p>Mari lanjut ke proses pengiriman data melalui Bot Telegram, menggunakan <code>python-telegram-bot</code>:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#75715e># Atur pesan Telegram</span>
TG_TEXT <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;&#34;</span>
TG_TEXT <span style=color:#f92672>+=</span> <span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;&lt;b&gt;&lt;u&gt;Urutan Prestasi Nilai Akademik&lt;/u&gt;&lt;/b&gt;</span><span style=color:#ae81ff>\n\n</span><span style=color:#e6db74>&#34;</span>
TG_TEXT <span style=color:#f92672>+=</span> <span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;&lt;b&gt;Urutan Anda: </span><span style=color:#e6db74>{</span>urutanHendra<span style=color:#e6db74>}</span><span style=color:#e6db74>&lt;/b&gt;</span><span style=color:#ae81ff>\n\n</span><span style=color:#e6db74>&#34;</span>
TG_TEXT <span style=color:#f92672>+=</span> <span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;Urutan pertama: </span><span style=color:#e6db74>{</span>namaPertama<span style=color:#e6db74>}</span><span style=color:#e6db74> | </span><span style=color:#e6db74>{</span>nilaiPertama<span style=color:#e6db74>}</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>
TG_TEXT <span style=color:#f92672>+=</span> <span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;Urutan terakhir: </span><span style=color:#e6db74>{</span>namaTerakhir<span style=color:#e6db74>}</span><span style=color:#e6db74> | </span><span style=color:#e6db74>{</span>nilaiTerakhir<span style=color:#e6db74>}</span><span style=color:#ae81ff>\n\n</span><span style=color:#e6db74>&#34;</span>
TG_TEXT <span style=color:#f92672>+=</span> <span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;&lt;b&gt;Waktu scraping: </span><span style=color:#e6db74>{</span>datetime<span style=color:#f92672>.</span>now()<span style=color:#f92672>.</span>strftime(<span style=color:#e6db74>&#39;%H:%M&#39;</span>)<span style=color:#e6db74>}</span><span style=color:#e6db74>&lt;/b&gt;&#34;</span>

<span style=color:#75715e># Kirim file text, dengan pesan Telegram sebelumnya sebagai caption</span>
bot<span style=color:#f92672>.</span>send_document(chat_id<span style=color:#f92672>=</span>TG_CHATID, document<span style=color:#f92672>=</span>open(RESULT_FILENAME, <span style=color:#e6db74>&#34;rb&#34;</span>), caption<span style=color:#f92672>=</span>TG_TEXT, parse_mode<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;HTML&#34;</span>)
</code></pre></div><h2 id=_full-code_><em>Full Code</em><a hidden class=anchor aria-hidden=true href=#_full-code_>#</a></h2>
<p>Berikut adalah <em>full code</em> dari <em>script</em> yang tersedia di <a href=https://gist.github.com/hendramanudinata03/97d51391be332fc86688771b2e24ca0a>Gist</a> saya:</p>
<script type=application/javascript src=https://gist.github.com/hendramanudinata03/97d51391be332fc86688771b2e24ca0a.js></script>
<h1 id=penutup>Penutup<a hidden class=anchor aria-hidden=true href=#penutup>#</a></h1>
<p>Demikianlah pengalaman lainnya yang dapat saya <em>share</em>. Semoga dapat menjadi referensi Anda, terlebih untuk peserta PPDB di Jawa Timur.</p>
<p>Terima kasih sudah membaca!</p>
</div>
<footer class=post-footer>
<ul class=post-tags>
</ul>
</footer>
</article>
</main>
<footer class=footer>
<span>&copy; 2022 <a href=https://www.hendra-manudinata.my.id>Hendra Manudinata</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
<script>document.querySelectorAll('pre > code').forEach(b=>{const c=b.parentNode.parentNode,a=document.createElement('button');a.classList.add('copy-code'),a.innerHTML='copy';function d(){a.innerHTML='copied!',setTimeout(()=>{a.innerHTML='copy'},2e3)}a.addEventListener('click',e=>{if('clipboard'in navigator){navigator.clipboard.writeText(b.textContent),d();return}const a=document.createRange();a.selectNodeContents(b);const c=window.getSelection();c.removeAllRanges(),c.addRange(a);try{document.execCommand('copy'),d()}catch(a){}c.removeRange(a)}),c.classList.contains("highlight")?c.appendChild(a):c.parentNode.firstChild==c||(b.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?b.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(a):b.parentNode.appendChild(a))})</script>
</body>
</html>